Using merge sort to sort the array.
At the same time, countting the times that inversion happens.